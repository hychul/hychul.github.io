# Chapter 8 애그리거트 트랜잭션 관리

- 애그리거트의 트랜잭션
- 에그리거트 잠금 기법

## 8.1 애그리거트와 트랜잭션

서로 다른 유즈케이스를 갖는 스레드에서 동일한 애그리거트에 접근을 하여 상태를 변경하는 경우 타이밍에 따라 일관성이 깨지게 될 수 있다.

일관성을 잃는 문제가 발생하지 않기 위해선 다른 두 가지 중 하나를 해야한다.

- 한 스레드에서 작업하는 동안, 다른 스레드에서 수정을 못하도록 한다.
- 한 스레드에서 조회한 후 다른 스레드에서 수정이 된 경우, 이전 스레드에서 다시 조회하여 수정하도록 한다.

이는 DB에서 제공하는 트랜잭션과 더불어 애그리거트를 위한 추가적인 트랜잭션 처리 기법과 관련있다.

## 8.2 선점 잠금

## 8.3 비선점 잠금

## 8.4 오프라인 선점 잠금
